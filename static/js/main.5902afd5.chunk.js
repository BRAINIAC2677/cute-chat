(this["webpackJsonpcute-chat"]=this["webpackJsonpcute-chat"]||[]).push([[0],{51:function(e,t,n){},57:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var c=n(2),o=n.n(c),a=n(31),r=n.n(a),s=n(6),l=n(36),i=n(8),u=n(18),d=n(1),j=o.a.createContext();function b(e){var t=Object(c.useState)({user:null,chatRooms:null,currentRoomId:null}),n=Object(u.a)(t,2),o=n[0],a=n[1];return Object(d.jsx)(j.Provider,{value:{global:o,setGlobal:a},children:e.children})}var m=n(3),h=(n(64),m.a.initializeApp({apiKey:"AIzaSyBQwYLNreWnwSEeNC3eOzr-2q-1PASglCI",authDomain:"cute-chat-43080.firebaseapp.com",projectId:"cute-chat-43080",storageBucket:"cute-chat-43080.appspot.com",messagingSenderId:"730231964779",appId:"1:730231964779:web:198ad75e908791fa541d2e"})),O=h.firestore(),f=n(32),x=n.n(f),v=(n(30),{signInFlow:"popup",signInOptions:[m.a.auth.GoogleAuthProvider.PROVIDER_ID,m.a.auth.EmailAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}});n(51);var g=function(){return console.log("Login Component."),Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"login-container elevated",children:[Object(d.jsx)("p",{className:"item title",children:"Login"}),Object(d.jsx)("div",{className:"item",children:Object(d.jsx)(x.a,{uiConfig:v,firebaseAuth:h.auth()})}),Object(d.jsx)("p",{className:"item dev",children:"Developed By: Asif Azad"})]})})},p=o.a.createContext();function y(e){var t=Object(c.useState)({searchIsOn:!1,focused:-1,breakPoint:1023}),n=Object(u.a)(t,2),o=n[0],a=n[1];return Object(d.jsx)(p.Provider,{value:{myStyle:o,setMyStyle:a},children:e.children})}function C(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var N=function(){var e=Object(c.useState)(C()),t=Object(u.a)(e,2),n=t[0],o=t[1];return Object(c.useEffect)((function(){function e(){o(C())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n};var I=function(e){console.log("ChatHead Component");var t=N().width,n=Object(c.useContext)(p),o=n.myStyle,a=n.setMyStyle,r=o.breakPoint,l=Object(c.useContext)(j),i=l.global,u=l.setGlobal,b=i.user,m=e.info,h=m.room_name,O=m.room_id,f=m.imgUrls,x=h[0]===b.displayName?h[1]:h[0],v=f[0]===b.photoURL?f[1]:f[0];return console.log("Image: ".concat(e.info)),Object(d.jsxs)("button",{className:"chat-head elevated",onClick:function(){return u((function(e){return Object(s.a)(Object(s.a)({},e),{},{currentRoomId:O})})),void(t<=r&&a((function(e){return Object(s.a)(Object(s.a)({},e),{},{focused:0})})))},children:[Object(d.jsx)("img",{className:"avatar",src:v,alt:"avatar"}),Object(d.jsx)("p",{children:x})]})};var R=function(){console.log("ChatSideBar component.");var e=Object(c.useContext)(j).global,t=Object(c.useContext)(p).myStyle.focused,n=e.chatRooms.map((function(e){return Object(d.jsx)(I,{info:e},e.room_id)})),o={display:"block",gridArea:"focus"};return-1===t&&(o.gridArea="sidebar"),console.log("focused in sidebar: ".concat(t)),Object(d.jsx)("div",{className:"chat-sidebar pressed",style:0===t?{display:"none"}:o,children:n})};var S=function(e){var t=Object(c.useContext)(j).global.chatRooms;return null===e?null:t.findIndex((function(t){return t.room_id===e}))},w=n(16),k=n(12);var A=function(){console.log("BlankRoom Component.");var e=Object(c.useContext)(j).global.user;return Object(d.jsxs)("div",{className:"blank-room",children:[Object(d.jsx)("p",{style:{color:"var(--accent-col-2)"},children:"Welcome To CuteChat ".concat(e.displayName)}),Object(d.jsx)("div",{className:"faded-icon",children:Object(d.jsx)(w.a,{icon:k.b})})]})};var _=function(){console.log("ComposeChatText Component");var e=o.a.useContext(j).global,t=e.chatRooms,n=e.currentRoomId,c=e.user,a=S(n),r=o.a.useState(""),s=Object(u.a)(r,2),l=s[0],i=s[1];return Object(d.jsxs)("div",{className:"compose-text",children:[Object(d.jsx)("input",{className:"pressed",placeholder:"You are awesome",value:l,onChange:function(e){return function(e){i(e.target.value)}(e)}}),Object(d.jsx)("button",{className:"elevated rounded-btn",onClick:function(){var e=new Date,o={id:Date.now(),author:c.email,body:l,time:e.toLocaleTimeString()},r=t[a].texts;r.length>=5&&r.shift(),r.push(o),O.collection("cute_rooms").doc(n).update({texts:r}).then((function(){return console.log("success writing")})).catch((function(e){return console.log(e)})),i("")},children:Object(d.jsx)(w.a,{icon:k.c})})]})};var L=function(){var e,t,n=Object(c.useContext)(j).global,o=n.user,a=n.chatRooms,r=n.currentRoomId,s=S(r);if(null!==s){var l=a[s],i=l.room_name,u=l.imgUrls;e=i[0]===o.displayName?i[1]:i[0],t=u[0]===o.photoURL?u[1]:u[0]}return Object(d.jsxs)("div",{className:"inbox-header",children:[Object(d.jsx)("img",{className:"avatar elevated",src:t,alt:"avatar"}),Object(d.jsx)("p",{children:e})]})};var U=function(e){console.log("Text component");var t=Object(c.useContext)(j).global,n=t.chatRooms,o=t.currentRoomId,a=t.user,r=S(o),s=e.info,l=s.id,i=s.body,u=s.time,b=s.author,m=n[r],h=m.members,f=m.imgUrls[h.findIndex((function(e){return e===b}))],x={},v={marginLeft:"1rem"};return b===a.email&&(x={order:"2"},v={order:"1",marginRight:"1rem"}),Object(d.jsxs)("div",{className:"chat-text",style:b===a.email?{alignSelf:"flex-end"}:null,children:[Object(d.jsx)("img",{className:"avatar",src:f,style:x,alt:"avatar"}),Object(d.jsxs)("div",{className:"chat-text-content elevated",style:v,children:[Object(d.jsx)("p",{className:"chat-text-time",children:u}),Object(d.jsx)("p",{className:"chat-text-body",children:i}),b===a.email&&Object(d.jsx)("button",{className:"chat-text-delete",onClick:function(){var e=n[r].texts.filter((function(e){return e.id!==l}));O.collection("cute_rooms").doc(o).update({texts:e}).then((function(){return console.log("success writing")})).catch((function(e){return console.log(e)}))},children:Object(d.jsx)(w.a,{icon:k.f})})]})]})};var E=function(){var e=Object(c.useContext)(j).global,t=e.chatRooms,n=e.currentRoomId,o=S(n);return Object(d.jsx)("div",{className:"chat-texts",children:t[o].texts.map((function(e){return Object(d.jsx)(U,{info:e},e.id)}))})};var z=function(){console.log("ChatBox component");var e=Object(c.useContext)(p).myStyle.focused,t=Object(c.useContext)(j).global.currentRoomId,n=S(t),o={display:"grid",gridArea:"focus"};return-1===e&&(o.gridArea="box"),Object(d.jsx)("div",{className:"chat-box pressed",style:1===e?{display:"none"}:o,children:null===n?Object(d.jsx)(A,{}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(L,{}),Object(d.jsx)(E,{}),Object(d.jsx)(_,{})]})})},P=n(26),M=n.n(P),D=n(34),B=n(35);var T=function(e){console.log("SearchResult component.");var t=Object(c.useContext)(j),n=t.global,o=t.setGlobal,a=Object(c.useContext)(p).setMyStyle,r=n.chatRooms,l=n.user,i=e.info,u=i.name,b=i.email,m=i.imgUrl;function h(){return(h=Object(B.a)(M.a.mark((function e(){var t,n,c,i,d,j,h,f,x,v,g,p;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Search Result from searches Click"),b!==l.email){e.next=5;break}return console.log("This is You!"),a((function(e){return Object(s.a)(Object(s.a)({},e),{},{searchIsOn:!1})})),e.abrupt("return");case 5:if(-1!==(t=r.findIndex((function(e){return e.members.includes(b)})))){e.next=22;break}return n=[l.displayName,u],c=[l.email,b],i=[l.photoURL,m],d={room_name:n,members:c,imgUrls:i,texts:[]},e.next=11,O.collection("cute_rooms").add(d);case 11:return j=e.sent,console.log("".concat(j.id," successfully room added.")),e.next=15,O.collection("cute_rooms").where("members","array-contains",l.email).get();case 15:h=e.sent,f=[],x=Object(D.a)(h.docs);try{for(x.s();!(v=x.n()).done;)g=v.value,f.push(Object(s.a)({room_id:g.id},g.data()))}catch(y){x.e(y)}finally{x.f()}o((function(e){return Object(s.a)(Object(s.a)({},e),{},{chatRooms:f,currentRoomId:j.id})})),e.next=24;break;case 22:p=r[t].room_id,o((function(e){return Object(s.a)(Object(s.a)({},e),{},{currentRoomInd:t,currentRoomId:p})}));case 24:a((function(e){return Object(s.a)(Object(s.a)({},e),{},{searchIsOn:!1})}));case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(d.jsxs)("button",{className:"search-result elevated",onClick:function(){return function(){return h.apply(this,arguments)}()},children:[Object(d.jsx)("img",{className:"avatar",src:m,alt:""}),Object(d.jsx)("p",{children:u})]})};var G=function(){console.log("Search Component");var e=Object(c.useContext)(p),t=e.myStyle,n=e.setMyStyle,o=t.searchIsOn,a=Object(c.useState)(""),r=Object(u.a)(a,2),l=r[0],i=r[1],j=Object(c.useState)([]),b=Object(u.a)(j,2),m=b[0],h=b[1];return Object(d.jsxs)("div",{className:"search",children:[Object(d.jsx)("input",{className:"pressed",value:l,placeholder:"ex. Asif Azad",onChange:function(e){return function(e){i(e.target.value)}(e)}}),Object(d.jsx)("button",{className:"rounded-btn elevated",onClick:function(){console.log("handleSearch clicked."),l&&(console.log("after setMyStyle: ".concat(t)),O.collection("cute_users").where("name","==",l.trim()).get().then((function(e){var t=[];e.forEach((function(e){t.push(Object(d.jsx)(T,{info:e.data()},e.id))})),h(t),n((function(e){return Object(s.a)(Object(s.a)({},e),{},{searchIsOn:!0})})),i("")})))},children:Object(d.jsx)(w.a,{icon:k.d})}),Object(d.jsx)("div",{className:"search-results",style:o?{display:"block"}:{display:"none"},children:0===m.length?Object(d.jsx)("div",{children:"No Matched Result"}):m})]})};var W=function(){console.log("Logout Component.");var e=N().width;return Object(d.jsx)("button",{className:e<=400?"rounded-btn elevated":"logout elevated",onClick:function(){h.auth().signOut()},children:e<=480?Object(d.jsx)(w.a,{icon:k.e}):"Logout"})};var F=function(){var e=Object(c.useContext)(j).global.user;return Object(d.jsxs)("div",{className:"chat-header elevated",children:[Object(d.jsx)("img",{className:"avatar elevated",src:e.photoURL,alt:"avatar"}),Object(d.jsx)(G,{}),Object(d.jsx)(W,{})]})};var Y=function(){var e=Object(c.useContext)(p).myStyle.searchIsOn;return Object(d.jsx)("div",{className:"greyout",style:e?{zIndex:"1"}:{zIndex:"-1"}})};var H=function(){var e=Object(c.useContext)(p),t=e.myStyle,n=e.setMyStyle,o=t.focused;return Object(d.jsx)("div",{className:"chat-footer elevated",children:Object(d.jsx)("button",{className:"elevated rounded-btn",onClick:function(){n((function(e){var t=1-e.focused;return Object(s.a)(Object(s.a)({},e),{},{focused:t})}))},children:Object(d.jsx)(w.a,{icon:0===o?k.g:k.a})})})};n(57);var J=function(){console.log("Chat Component");var e=Object(c.useContext)(j),t=e.global,n=e.setGlobal,a=Object(c.useContext)(p),r=a.myStyle,l=a.setMyStyle,i=r.breakPoint,u=N().width,b=t.user,m=t.chatRooms;return console.log("width: ".concat(u)),console.log("focused: ".concat(r.focused)),Object(c.useEffect)((function(){l(u<=i?function(e){return Object(s.a)(Object(s.a)({},e),{},{focused:0})}:function(e){return Object(s.a)(Object(s.a)({},e),{},{focused:-1})})}),[u]),Object(c.useEffect)((function(){var e=O.collection("cute_rooms").where("members","array-contains",b.email).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(s.a)({room_id:e.id},e.data()))})),n((function(e){return Object(s.a)(Object(s.a)({},e),{},{chatRooms:t})}))}));return function(){e()}}),[]),Object(d.jsx)(o.a.Fragment,{children:null===m?Object(d.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100vw",height:"100vh",fontSize:"1.5rem",backgroundColor:"var(--primary-col)"},children:Object(d.jsx)("p",{children:"Loading. . ."})}):Object(d.jsxs)("div",{className:"chat-container",children:[Object(d.jsx)(F,{}),Object(d.jsx)(R,{}),Object(d.jsx)(z,{}),Object(d.jsx)(H,{}),Object(d.jsx)(Y,{})]})})};var V=function(){console.log("App component");var e=Object(c.useContext)(j),t=e.global,n=e.setGlobal,o=t.user;return Object(c.useEffect)((function(){var e=h.auth().onAuthStateChanged((function(e){if(console.log("Auth Changed. User: ".concat(e)),n(null===e?function(e){return Object(s.a)(Object(s.a)({},e),{},{user:null,currentRoomId:null,chatRooms:null})}:function(t){return Object(s.a)(Object(s.a)({},t),{},{user:e})}),e&&h.auth().currentUser.metadata.creationTime===h.auth().currentUser.metadata.lastSignInTime){var t={name:e.displayName,email:e.email,imgUrl:e.photoURL};O.collection("cute_users").add(t).then((function(e){return console.log("".concat(e.id," and new user successfully in."))})).catch((function(e){return console.log("".concat(e," in writing new user in database."))}))}}));return function(){e()}}),[]),Object(d.jsx)(y,{children:Object(d.jsx)(l.a,{children:Object(d.jsx)(i.c,{children:Object(d.jsx)(i.a,{exact:!0,path:"/",children:o?Object(d.jsx)(J,{}):Object(d.jsx)(g,{})})})})})};r.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(b,{children:Object(d.jsx)(V,{})})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.5902afd5.chunk.js.map